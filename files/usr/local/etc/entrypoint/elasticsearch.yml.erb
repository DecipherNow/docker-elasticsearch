#   Copyright 2019 Decipher Technology Studios
#
#   Licensed under the Apache License, Version 2.0 (the "License");
#   you may not use this file except in compliance with the License.
#   You may obtain a copy of the License at
#
#       http://www.apache.org/licenses/LICENSE-2.0
#
#   Unless required by applicable law or agreed to in writing, software
#   distributed under the License is distributed on an "AS IS" BASIS,
#   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#   See the License for the specific language governing permissions and
#   limitations under the License.

# This file is automatically generated by the /usr/local/bin/entrypoint script.

cluster.name: <%= values.fetch('cluster_name') %>

node.name: <%= values.fetch('node_name') %>.<%= values.fetch('domain_name') %>

path.data: /var/lib/elasticsearch/data
path.logs: /var/lib/elasticsearch/logs

network.host: 0.0.0.0

http.port: 9200

transport.port: 9300

discovery.seed_hosts: [<%= values.fetch('node_names').split(',').map { |host| "\"#{host.strip}\"" }.join(', ') %>]

cluster.initial_master_nodes: [<%= values.fetch('node_names').split(',').map { |host| "\"#{host.strip}\"" }.join(', ') %>]

gateway.recover_after_nodes: <%= (values.fetch('node_names').split(',').length.to_f / 2.0).ceil %>

action.destructive_requires_name: true
